#include <cstdint>
#include <iostream>
#include <vector>
#include <limits>
#include <cstdlib>
#include <ctime>

#if defined(_MSC_VER)
    #define NOINLINE __declspec(noinline)
#else
    #define NOINLINE __attribute__((noinline))
#endif

// volatile to prevent full optimisations
volatile std::uint64_t g_acc0 = 0;
volatile std::uint64_t g_acc1 = 0;
volatile std::int64_t g_signed = 0;

NOINLINE void save_values_codegen(volatile std::uint64_t x, volatile std::uint64_t y, volatile std::int64_t z) {
    // TODO: this is bad, just use a different operation
    g_acc0 ^= *reinterpret_cast<volatile std::uint64_t*>(&x);
    g_acc1 += y;
    g_signed += z;
}

NOINLINE void block_wrap(volatile std::uint64_t& x, volatile std::uint64_t& y, volatile std::int64_t& z) {
    	volatile std::uint64_t s = static_cast<std::uint64_t>(x + -0x14556BAA1C18F97ELL);
	volatile std::uint64_t t = static_cast<std::uint64_t>(y + 0x54713D60C8A70639LL);
	volatile std::int64_t u = static_cast<std::int64_t>(z - 0x7A024204F7C1BD87ULL);
    // block 0
	x = ~x;
	y = y + (x & 15);
	switch (x & 7) { case 0: x += 123; break; case 1: x -= 123; break; case 2: x *= 123; break; default: x ^= 123; break; };
	x -= (207);
	x *= (185);
	x = ~x;
	if (x & 15) x += y ^ 181; x -= y & 181;
	x ^= y;
	x *= (21);
	x /= (78|1);
	x /= (141|1);
	switch (x & 7) { case 0: x += 151; break; case 1: x -= 151; break; case 2: x *= 151; break; default: x ^= 151; break; };
	x *= (153);
	x ^= y;
	x <<= (5);
	x = ~x;
	x %= (237|1);
	switch (x & 7) { case 0: x += 175; break; case 1: x -= 175; break; case 2: x *= 175; break; default: x ^= 175; break; };
	x = x * x + y;
	y = y + (x & 13107);
	x = ~x;
	x *= (84);
	x = ~x;
	x >>= (1);
	x /= (181|1);
	x <<= (4);
	x /= (201|1);
	x -= (210);
	x += (32);
	x /= (101|1);
	save_values_codegen(x, y, z);
    // block 1
	x /= (10|1);
	x >>= (2);
	x = ~x;
	x += (140);
	x &= y;
	x |= y;
	x -= (129);
	x /= (180|1);
	x &= y;
	x <<= (6);
	x -= (202);
	x <<= (5);
	x /= (153|1);
	x += (121);
	x = x * x + y;
	x--;
	x %= (144|1);
	z = z + static_cast<std::int64_t>(x - y);
	x -= (140);
	x ^= y;
	x |= y;
	x |= y;
	x *= (1);
	if (x & 15) x += y ^ 41; x -= y & 41;
	z = z + static_cast<std::int64_t>(x - y);
	x -= (103);
	x -= (43);
	x &= y;
	x = x * x + y;
	x -= (127);
	save_values_codegen(x, y, z);
    // block 2
	z = z + static_cast<std::int64_t>(x - y);
	switch (x & 7) { case 0: x += 247; break; case 1: x -= 247; break; case 2: x *= 247; break; default: x ^= 247; break; };
	x %= (253|1);
	y = y + (x & 15);
	x += (184);
	x >>= (5);
	x |= y;
	x /= (122|1);
	x += (71);
	x &= y;
	x /= (224|1);
	x += (11);
	x &= y;
	x -= (217);
	z = z + static_cast<std::int64_t>(x - y);
	switch (x & 7) { case 0: x += 46; break; case 1: x -= 46; break; case 2: x *= 46; break; default: x ^= 46; break; };
	x |= y;
	x &= y;
	x *= (87);
	x -= (70);
	x |= y;
	x |= y;
	x -= (79);
	x |= y;
	y = y + (x & 13107);
	x = ~x;
	x = ~x;
	y = y + (x & 2863311530);
	x %= (236|1);
	x *= (17);
	save_values_codegen(x, y, z);
    // block 3
	x ^= y;
	x /= (101|1);
	z = z + static_cast<std::int64_t>(x - y);
	y = y + (x & 15);
	x &= y;
	x >>= (1);
	x += (232);
	x >>= (4);
	x &= y;
	x >>= (2);
	x >>= (4);
	switch (x & 7) { case 0: x += 212; break; case 1: x -= 212; break; case 2: x *= 212; break; default: x ^= 212; break; };
	x = ~x;
	y = y + (x & 13107);
	if (x & 13107) x += y ^ 214; x -= y & 214;
	x >>= (5);
	x += (88);
	if (x & 15) x += y ^ 10; x -= y & 10;
	x &= y;
	x |= y;
	x *= (205);
	x *= (58);
	x |= y;
	x <<= (2);
	x++;
	x *= (174);
	y = y + (x & 2863311530);
	switch (x & 7) { case 0: x += 231; break; case 1: x -= 231; break; case 2: x *= 231; break; default: x ^= 231; break; };
	x = ~x;
	x += (169);
	save_values_codegen(x, y, z);
    // block 4
	x |= y;
	if (x & 2863311530) x += y ^ 17; x -= y & 17;
	x |= y;
	x--;
	x ^= y;
	x -= (242);
	y = y + (x & 255);
	x %= (208|1);
	x -= (157);
	z = z + static_cast<std::int64_t>(x - y);
	x %= (6|1);
	if (x & 2863311530) x += y ^ 27; x -= y & 27;
	x >>= (4);
	x -= (157);
	if (x & 2863311530) x += y ^ 167; x -= y & 167;
	x %= (246|1);
	x /= (133|1);
	x--;
	z = z + static_cast<std::int64_t>(x - y);
	x -= (231);
	x &= y;
	x ^= y;
	x = x * x + y;
	y = y + (x & 13107);
	x *= (240);
	x *= (26);
	x += (203);
	y = y + (x & 2863311530);
	x &= y;
	x /= (92|1);
	save_values_codegen(x, y, z);
    // block 5
	x++;
	x ^= y;
	x %= (54|1);
	x /= (192|1);
	x++;
	x %= (48|1);
	x = ~x;
	x %= (8|1);
	if (x & 2863311530) x += y ^ 122; x -= y & 122;
	switch (x & 7) { case 0: x += 163; break; case 1: x -= 163; break; case 2: x *= 163; break; default: x ^= 163; break; };
	x *= (27);
	x <<= (2);
	x ^= y;
	x ^= y;
	x++;
	x %= (154|1);
	x *= (180);
	y = y + (x & 13107);
	x %= (152|1);
	x++;
	x++;
	x--;
	if (x & 2863311530) x += y ^ 113; x -= y & 113;
	x |= y;
	x <<= (1);
	x /= (143|1);
	z = z + static_cast<std::int64_t>(x - y);
	y = y + (x & 15);
	z = z + static_cast<std::int64_t>(x - y);
	x++;
	save_values_codegen(x, y, z);
    // block 6
	x = ~x;
	x += (213);
	z = z + static_cast<std::int64_t>(x - y);
	x /= (197|1);
	switch (x & 7) { case 0: x += 156; break; case 1: x -= 156; break; case 2: x *= 156; break; default: x ^= 156; break; };
	x = ~x;
	x ^= y;
	x += (31);
	x += (66);
	z = z + static_cast<std::int64_t>(x - y);
	x++;
	x *= (10);
	x |= y;
	x = x * x + y;
	x *= (107);
	x = x * x + y;
	switch (x & 7) { case 0: x += 27; break; case 1: x -= 27; break; case 2: x *= 27; break; default: x ^= 27; break; };
	x &= y;
	x %= (41|1);
	x--;
	x %= (144|1);
	x++;
	x >>= (4);
	x = ~x;
	x |= y;
	x -= (228);
	x += (91);
	x += (217);
	x *= (176);
	x += (93);
	save_values_codegen(x, y, z);
    // block 7
	x += (70);
	x ^= y;
	x >>= (4);
	if (x & 2863311530) x += y ^ 99; x -= y & 99;
	y = y + (x & 13107);
	x %= (115|1);
	x = x * x + y;
	x <<= (3);
	y = y + (x & 13107);
	x ^= y;
	x >>= (6);
	x--;
	x <<= (1);
	x ^= y;
	x = x * x + y;
	y = y + (x & 13107);
	z = z + static_cast<std::int64_t>(x - y);
	x >>= (3);
	x -= (14);
	x += (75);
	x %= (17|1);
	x--;
	x >>= (5);
	x *= (204);
	switch (x & 7) { case 0: x += 117; break; case 1: x -= 117; break; case 2: x *= 117; break; default: x ^= 117; break; };
	x += (134);
	x++;
	x >>= (2);
	x |= y;
	x &= y;
	save_values_codegen(x, y, z);
    // block 8
	x -= (79);
	x += (118);
	x -= (235);
	z = z + static_cast<std::int64_t>(x - y);
	x *= (62);
	y = y + (x & 13107);
	x *= (210);
	x -= (246);
	x = ~x;
	x++;
	switch (x & 7) { case 0: x += 231; break; case 1: x -= 231; break; case 2: x *= 231; break; default: x ^= 231; break; };
	x |= y;
	switch (x & 7) { case 0: x += 163; break; case 1: x -= 163; break; case 2: x *= 163; break; default: x ^= 163; break; };
	x ^= y;
	x <<= (4);
	x >>= (6);
	switch (x & 7) { case 0: x += 132; break; case 1: x -= 132; break; case 2: x *= 132; break; default: x ^= 132; break; };
	x /= (99|1);
	x /= (249|1);
	x ^= y;
	x ^= y;
	x = x * x + y;
	x ^= y;
	x |= y;
	x += (142);
	x++;
	x %= (225|1);
	x <<= (1);
	x >>= (4);
	x ^= y;
	save_values_codegen(x, y, z);
    // block 9
	x--;
	x = ~x;
	x = x * x + y;
	z = z + static_cast<std::int64_t>(x - y);
	switch (x & 7) { case 0: x += 168; break; case 1: x -= 168; break; case 2: x *= 168; break; default: x ^= 168; break; };
	x = ~x;
	x &= y;
	x >>= (3);
	x--;
	x -= (81);
	if (x & 15) x += y ^ 221; x -= y & 221;
	x &= y;
	x |= y;
	x %= (91|1);
	x -= (7);
	x += (58);
	x *= (211);
	y = y + (x & 13107);
	y = y + (x & 2863311530);
	x <<= (3);
	x--;
	switch (x & 7) { case 0: x += 137; break; case 1: x -= 137; break; case 2: x *= 137; break; default: x ^= 137; break; };
	x -= (145);
	x--;
	x = x * x + y;
	x *= (85);
	x ^= y;
	switch (x & 7) { case 0: x += 44; break; case 1: x -= 44; break; case 2: x *= 44; break; default: x ^= 44; break; };
	y = y + (x & 255);
	z = z + static_cast<std::int64_t>(x - y);
	save_values_codegen(x, y, z);
    // block 10
	x &= y;
	x += (161);
	x *= (92);
	z = z + static_cast<std::int64_t>(x - y);
	x <<= (4);
	x &= y;
	x += (80);
	switch (x & 7) { case 0: x += 121; break; case 1: x -= 121; break; case 2: x *= 121; break; default: x ^= 121; break; };
	x -= (117);
	x--;
	x += (70);
	x &= y;
	x >>= (5);
	x--;
	x /= (145|1);
	switch (x & 7) { case 0: x += 175; break; case 1: x -= 175; break; case 2: x *= 175; break; default: x ^= 175; break; };
	x %= (85|1);
	x -= (145);
	x++;
	if (x & 13107) x += y ^ 127; x -= y & 127;
	x <<= (2);
	z = z + static_cast<std::int64_t>(x - y);
	x = ~x;
	x >>= (5);
	x &= y;
	x *= (169);
	x /= (242|1);
	y = y + (x & 2863311530);
	x += (110);
	x &= y;
	save_values_codegen(x, y, z);
    // block 11
	if (x & 13107) x += y ^ 49; x -= y & 49;
	x %= (217|1);
	x--;
	switch (x & 7) { case 0: x += 234; break; case 1: x -= 234; break; case 2: x *= 234; break; default: x ^= 234; break; };
	x += (93);
	x >>= (3);
	x += (188);
	x ^= y;
	x *= (147);
	z = z + static_cast<std::int64_t>(x - y);
	x >>= (4);
	y = y + (x & 2863311530);
	x &= y;
	x *= (79);
	x += (196);
	x--;
	x -= (150);
	x %= (145|1);
	if (x & 13107) x += y ^ 211; x -= y & 211;
	x = ~x;
	x -= (21);
	x++;
	x /= (172|1);
	x -= (81);
	x--;
	y = y + (x & 15);
	x--;
	x <<= (2);
	x -= (187);
	switch (x & 7) { case 0: x += 177; break; case 1: x -= 177; break; case 2: x *= 177; break; default: x ^= 177; break; };
	save_values_codegen(x, y, z);
    // block 12
	x <<= (5);
	x *= (144);
	x >>= (3);
	x &= y;
	x %= (194|1);
	x -= (162);
	x = x * x + y;
	x >>= (4);
	z = z + static_cast<std::int64_t>(x - y);
	x %= (122|1);
	switch (x & 7) { case 0: x += 22; break; case 1: x -= 22; break; case 2: x *= 22; break; default: x ^= 22; break; };
	x += (209);
	y = y + (x & 13107);
	if (x & 2863311530) x += y ^ 214; x -= y & 214;
	x /= (35|1);
	x <<= (2);
	if (x & 15) x += y ^ 227; x -= y & 227;
	x -= (106);
	x |= y;
	x <<= (1);
	x -= (113);
	x |= y;
	x <<= (4);
	x >>= (4);
	x++;
	x++;
	x += (83);
	x = ~x;
	x &= y;
	x *= (86);
	save_values_codegen(x, y, z);
    // block 13
	x = ~x;
	x = x * x + y;
	x += (97);
	switch (x & 7) { case 0: x += 179; break; case 1: x -= 179; break; case 2: x *= 179; break; default: x ^= 179; break; };
	x <<= (2);
	if (x & 13107) x += y ^ 243; x -= y & 243;
	x--;
	x |= y;
	x++;
	z = z + static_cast<std::int64_t>(x - y);
	x--;
	x += (176);
	x %= (5|1);
	x = x * x + y;
	x /= (147|1);
	x %= (173|1);
	y = y + (x & 2863311530);
	x ^= y;
	x = x * x + y;
	x *= (34);
	x /= (111|1);
	x = ~x;
	x ^= y;
	x *= (214);
	x = x * x + y;
	x = ~x;
	x -= (157);
	x /= (137|1);
	x--;
	y = y + (x & 13107);
	save_values_codegen(x, y, z);
    // block 14
	z = z + static_cast<std::int64_t>(x - y);
	x = ~x;
	x = x * x + y;
	x %= (161|1);
	x = x * x + y;
	x &= y;
	x |= y;
	x |= y;
	y = y + (x & 15);
	x++;
	x++;
	x--;
	y = y + (x & 15);
	x <<= (2);
	x ^= y;
	x = ~x;
	if (x & 13107) x += y ^ 176; x -= y & 176;
	x &= y;
	x = x * x + y;
	x--;
	x ^= y;
	x--;
	y = y + (x & 255);
	x %= (38|1);
	x >>= (6);
	x &= y;
	x--;
	x /= (229|1);
	if (x & 13107) x += y ^ 28; x -= y & 28;
	x++;
	save_values_codegen(x, y, z);
    // block 15
	x = ~x;
	switch (x & 7) { case 0: x += 142; break; case 1: x -= 142; break; case 2: x *= 142; break; default: x ^= 142; break; };
	x += (212);
	x = x * x + y;
	z = z + static_cast<std::int64_t>(x - y);
	x &= y;
	x--;
	x--;
	if (x & 13107) x += y ^ 60; x -= y & 60;
	x -= (123);
	x &= y;
	switch (x & 7) { case 0: x += 166; break; case 1: x -= 166; break; case 2: x *= 166; break; default: x ^= 166; break; };
	x &= y;
	x <<= (5);
	z = z + static_cast<std::int64_t>(x - y);
	x--;
	x &= y;
	x |= y;
	x %= (169|1);
	switch (x & 7) { case 0: x += 51; break; case 1: x -= 51; break; case 2: x *= 51; break; default: x ^= 51; break; };
	x--;
	x /= (239|1);
	if (x & 255) x += y ^ 224; x -= y & 224;
	x ^= y;
	x &= y;
	x++;
	x *= (20);
	x ^= y;
	x %= (60|1);
	x = ~x;
	save_values_codegen(x, y, z);
    // block 16
	x--;
	x--;
	x ^= y;
	x++;
	x--;
	x /= (123|1);
	z = z + static_cast<std::int64_t>(x - y);
	x <<= (3);
	x ^= y;
	x--;
	x ^= y;
	x = ~x;
	x *= (121);
	x ^= y;
	x -= (105);
	x >>= (3);
	x /= (47|1);
	x += (60);
	x--;
	x /= (211|1);
	x *= (190);
	x += (134);
	x *= (138);
	x ^= y;
	x = ~x;
	x >>= (1);
	x += (150);
	if (x & 15) x += y ^ 174; x -= y & 174;
	x = x * x + y;
	x /= (70|1);
	save_values_codegen(x, y, z);
    // block 17
	x %= (98|1);
	x >>= (5);
	switch (x & 7) { case 0: x += 28; break; case 1: x -= 28; break; case 2: x *= 28; break; default: x ^= 28; break; };
	x /= (131|1);
	x <<= (5);
	x %= (107|1);
	x *= (145);
	x ^= y;
	x = ~x;
	z = z + static_cast<std::int64_t>(x - y);
	z = z + static_cast<std::int64_t>(x - y);
	x &= y;
	x ^= y;
	x = ~x;
	x >>= (5);
	x -= (40);
	if (x & 15) x += y ^ 223; x -= y & 223;
	z = z + static_cast<std::int64_t>(x - y);
	y = y + (x & 15);
	x--;
	if (x & 13107) x += y ^ 47; x -= y & 47;
	x %= (163|1);
	x >>= (4);
	x ^= y;
	switch (x & 7) { case 0: x += 188; break; case 1: x -= 188; break; case 2: x *= 188; break; default: x ^= 188; break; };
	x -= (16);
	z = z + static_cast<std::int64_t>(x - y);
	x /= (221|1);
	x |= y;
	x = ~x;
	save_values_codegen(x, y, z);
    // block 18
	x++;
	x--;
	z = z + static_cast<std::int64_t>(x - y);
	x /= (193|1);
	z = z + static_cast<std::int64_t>(x - y);
	x++;
	x--;
	y = y + (x & 255);
	x %= (136|1);
	x |= y;
	x *= (155);
	x += (53);
	x |= y;
	x ^= y;
	x %= (120|1);
	z = z + static_cast<std::int64_t>(x - y);
	x--;
	x ^= y;
	x *= (12);
	x = ~x;
	y = y + (x & 255);
	x /= (112|1);
	x %= (227|1);
	y = y + (x & 2863311530);
	x &= y;
	x |= y;
	switch (x & 7) { case 0: x += 139; break; case 1: x -= 139; break; case 2: x *= 139; break; default: x ^= 139; break; };
	x = x * x + y;
	x = ~x;
	if (x & 255) x += y ^ 36; x -= y & 36;
	save_values_codegen(x, y, z);
    // block 19
	switch (x & 7) { case 0: x += 107; break; case 1: x -= 107; break; case 2: x *= 107; break; default: x ^= 107; break; };
	x /= (134|1);
	x = ~x;
	x++;
	x <<= (6);
	x--;
	x++;
	switch (x & 7) { case 0: x += 219; break; case 1: x -= 219; break; case 2: x *= 219; break; default: x ^= 219; break; };
	z = z + static_cast<std::int64_t>(x - y);
	x &= y;
	x *= (170);
	if (x & 255) x += y ^ 9; x -= y & 9;
	x |= y;
	x &= y;
	z = z + static_cast<std::int64_t>(x - y);
	x /= (21|1);
	if (x & 15) x += y ^ 45; x -= y & 45;
	y = y + (x & 2863311530);
	x -= (6);
	x *= (223);
	if (x & 2863311530) x += y ^ 251; x -= y & 251;
	x -= (201);
	x = x * x + y;
	x--;
	x &= y;
	z = z + static_cast<std::int64_t>(x - y);
	x++;
	x ^= y;
	x += (62);
	x /= (212|1);
	save_values_codegen(x, y, z);
}

int main(int argc, char** argv) {
    unsigned seed = static_cast<unsigned>(time(nullptr));

    std::srand(seed);

    // random values
    volatile std::uint64_t a = 0x133287637EBDCD9LL;
    volatile std::uint64_t b = -0x309A2B26DA60BCD7LL;
    volatile std::int64_t c = 0xAF19922AD9B8A714ULL;

    block_wrap(a, b, c);

    save_values_codegen(a, b, c);

    std::cout << "g_acc0: " << g_acc0 << ", g_acc1: " << g_acc1 << ", g_signed: " << g_signed << std::endl;
    return 0;
}
